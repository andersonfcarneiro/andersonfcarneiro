<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Painel de Metas 2025 ‚Äì PCRJ</title>
  <style>
    :root {
      --bg: #0b0f19;
      --surface: #0f172a;
      --card: #111827;
      --elev: #0b1220;
      --text: #e5eef5;
      --muted: #9fb3c8;
      --line: #1f2a44;
      --accent: #3b82f6;
      --good: #10b981;
      --warn: #f59e0b;
      --bad: #ef4444;
      --pink: #ec4899;
      --purple: #8b5cf6;
      --cyan: #06b6d4;
      --green: #22c55e;
      --blue: #3b82f6;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 700px at 80% -20%, rgba(101,136,255,.12), transparent 60%),
                  radial-gradient(800px 500px at -10% 30%, rgba(16,185,129,.12), transparent 60%),
                  var(--bg);
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      -webkit-font-smoothing: antialiased;
      line-height: 1.4;
    }
    header {
      position: sticky; top: 0; z-index: 5;
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(11,15,25,.85), rgba(11,15,25,.6) 70%, transparent);
      border-bottom: 1px solid rgba(159,179,200,.08);
    }
    .bar {
      max-width: 1200px; margin: 0 auto; padding: 16px 20px;
      display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center;
    }
    .title {
      display: flex; gap: 12px; align-items: center;
    }
    .logo {
      width: 36px; height: 36px; border-radius: 10px;
      background: linear-gradient(135deg, var(--blue), var(--purple));
      display: grid; place-items: center; font-weight: 700;
      box-shadow: 0 8px 24px rgba(59,130,246,.35), inset 0 0 20px rgba(255,255,255,.06);
    }
    .title h1 { margin: 0; font-size: 18px; letter-spacing: .2px; }
    .title .sub { color: var(--muted); font-size: 12px; }
    .controls {
      display: flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end;
    }
    .chip, .btn {
      background: linear-gradient(180deg, #0f1a2c, #0b1220);
      color: var(--text);
      border: 1px solid var(--line);
      padding: 10px 12px; border-radius: 10px; font-size: 14px;
      display: inline-flex; gap: 8px; align-items: center;
      cursor: pointer; transition: .2s ease;
    }
    .chip:hover, .btn:hover { border-color: rgba(159,179,200,.3); transform: translateY(-1px); }
    .chip input, .chip select {
      background: transparent; border: 0; color: var(--text); outline: none;
      font: inherit; min-width: 160px;
    }
    .btn.accent { background: linear-gradient(135deg, #2563eb, #7c3aed); border-color: transparent; }
    .btn.accent:hover { filter: brightness(1.05); }
    main { max-width: 1200px; margin: 12px auto 56px; padding: 0 20px; }
    .kpis {
      display: grid; grid-template-columns: repeat(12, 1fr); gap: 12px; margin: 12px 0 4px;
    }
    .kpi {
      grid-column: span 3;
      background: linear-gradient(180deg, #0d1424, #0a1020);
      border: 1px solid var(--line); border-radius: 16px; padding: 14px;
      display: grid; grid-template-columns: auto 1fr auto; gap: 10px; align-items: center;
      transition: .2s ease; position: relative; overflow: hidden;
    }
    .kpi:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,.25); border-color: rgba(159,179,200,.24); }
    .badge {
      width: 38px; height: 38px; border-radius: 12px; display: grid; place-items: center;
      background: linear-gradient(135deg, rgba(59,130,246,.15), rgba(124,58,237,.12));
      border: 1px solid rgba(159,179,200,.16);
    }
    .kpi h3 { margin: 0; font-size: 14px; color: var(--muted); font-weight: 500; }
    .kpi .name { font-size: 15px; color: var(--text); margin-top: 2px; font-weight: 600; }
    .pill {
      font-size: 12px; padding: 6px 8px; border-radius: 999px; border: 1px solid var(--line); color: var(--muted);
      background: linear-gradient(180deg, #0e1626, #0c1322);
    }
    .donut { --p: 0; --c: var(--accent);
      width: 44px; height: 44px; border-radius: 50%;
      background: conic-gradient(var(--c) calc(var(--p) * 1%), rgba(159,179,200,.12) 0);
      position: relative; border: 4px solid #0a1020;
    }
    .donut::after {
      content: attr(data-label);
      position: absolute; inset: 0; display: grid; place-items: center;
      font-size: 11px; color: var(--muted);
      background: radial-gradient(circle at 50% 50%, #0a1020 37%, transparent 37%);
    }
    .grid {
      display: grid; grid-template-columns: repeat(12,1fr); gap: 14px; margin-top: 12px;
    }
    .card {
      grid-column: span 12;
      background: linear-gradient(180deg, #0f172a, #0a1223);
      border: 1px solid var(--line); border-radius: 16px; padding: 16px;
      transition: .2s; position: relative; overflow: hidden;
    }
    .card:hover { border-color: rgba(159,179,200,.28); }
    .card .head { display: flex; gap: 12px; align-items: center; justify-content: space-between; margin-bottom: 10px; }
    .card h2 { margin: 0; font-size: 16px; }
    .meta-tags { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .tag { font-size: 12px; color: var(--muted); background: #0c1528; border: 1px solid var(--line); padding: 6px 8px; border-radius: 10px; }
    .sections { display: grid; grid-template-columns: repeat(12,1fr); gap: 12px; }
    .sec { grid-column: span 6; background: linear-gradient(180deg, #0c1426, #091122); border: 1px solid var(--line); border-radius: 12px; padding: 12px; }
    .sec h4 { margin: 0 0 8px; font-size: 13px; color: var(--muted); }
    ul { margin: 0; padding-left: 18px; }
    li { margin: 6px 0; }
    .foot { display: flex; gap: 10px; align-items: center; margin-top: 12px; justify-content: space-between; }
    .ghost { background: transparent; border-color: var(--line); }
    dialog {
      width: min(880px, 92vw); border: 1px solid var(--line); border-radius: 16px; padding: 0; background: #0b1220; color: var(--text);
      box-shadow: 0 30px 80px rgba(0,0,0,.5);
    }
    dialog::backdrop { background: rgba(3,6,12,.6); backdrop-filter: blur(2px); }
    .modal-head { padding: 14px 16px; border-bottom: 1px solid var(--line); display: flex; justify-content: space-between; align-items: center; }
    .modal-body { padding: 16px; display: grid; gap: 12px; }
    .close { background: transparent; border: 1px solid var(--line); color: var(--text); border-radius: 10px; padding: 8px 10px; cursor: pointer; }
    .status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 6px; }
    footer { max-width: 1200px; margin: 24px auto 48px; padding: 0 20px; color: var(--muted); font-size: 12px; }
    /* Print */
    @media print {
      header, .controls, .kpis, .grid, footer { display: none !important; }
      body { background: #fff; color: #111; }
      .print { display: block !important; }
    }
    .print { display: none; background: #fff; color: #111; }
    .print .wrap { max-width: 800px; margin: 0 auto; padding: 20px 12px 60px; }
    .print h1 { font-size: 22px; margin: 0 0 6px; }
    .print h2 { font-size: 16px; margin: 18px 0 8px; }
    .print p, .print li { color: #222; }
    .hr { height: 1px; background: #ddd; margin: 16px 0; }
    .pb { page-break-before: always; }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="title">
        <div class="logo">M7</div>
        <div>
          <h1>Painel de metas 2025 ‚Ä¢ PCRJ</h1>
          <div class="sub">Gest√£o estrat√©gica ‚Äî RH, finan√ßas e efici√™ncia operacional</div>
        </div>
      </div>
      <div class="controls">
        <label class="chip">
          üîé
          <input id="q" placeholder="Filtrar por palavra-chave..." />
        </label>
        <label class="chip">
          üìå
          <select id="statusFilter">
            <option value="all">Todos os status</option>
            <option value="em_andamento">Em andamento</option>
            <option value="risco">Em risco</option>
            <option value="concluido">Conclu√≠do</option>
          </select>
        </label>
        <button class="btn ghost" id="expandAll">Expandir tudo</button>
        <button class="btn accent" id="printBtn">üßæ Gerar PDF</button>
      </div>
    </div>
  </header>

  <main>
    <section class="kpis" id="kpis"></section>
    <section class="grid" id="grid"></section>
  </main>

  <dialog id="modal">
    <div class="modal-head">
      <div style="display:flex;align-items:center;gap:10px;">
        <div id="modalDot" class="status-dot"></div>
        <strong id="modalTitle">Meta</strong>
      </div>
      <button class="close" onclick="modal.close()">Fechar</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </dialog>

  <!-- Print (Resumo executivo + detalhes) -->
  <section class="print" id="print">
    <div class="wrap" id="printWrap">
      <h1>Metas estrat√©gicas 2025 ‚Äì PCRJ</h1>
      <div>Resumo executivo e detalhamento por meta</div>
      <div class="hr"></div>
      <h2>Resumo executivo</h2>
      <p>
        Este documento consolida sete metas priorit√°rias para 2025, com foco em unifica√ß√£o de sistemas de RH, governan√ßa
        de consignados, automa√ß√£o de pagamentos, intelig√™ncia em folha, moderniza√ß√£o de carreiras, efici√™ncia no mercado
        livre de energia e desenvolvimento de pessoas. Ele apresenta objetivos, entregas, indicadores, marcos e riscos com
        respectivas estrat√©gias de mitiga√ß√£o.
      </p>
      <ul id="execBullets"></ul>
      <div class="hr"></div>
      <div id="printDetails"></div>
    </div>
  </section>

  <footer>
    Feito para leitura executiva. Filtros, cart√µes e modais para navega√ß√£o r√°pida; impress√£o inclui resumo executivo seguido de todos os detalhes.
  </footer>

  <script>
    const metas = [
      {
        id: 1,
        titulo: "Migra√ß√£o das Empresas Municipais para o ERGON",
        status: "em_andamento",
        progresso: 0, // ajuste conforme andamento
        cor: "var(--blue)",
        objetivo: "Unificar a gest√£o de RH/folha das empresas municipais no ERGON, com integridade de dados, ader√™ncia normativa e redu√ß√£o de custos operacionais.",
        entregas: [
          "Plano diretor de migra√ß√£o por empresa (assessment, mapeamento de dados, cronograma, cutover e revers√£o).",
          "Restabelecimento/valida√ß√£o de ambiente de homologa√ß√£o e testes de regress√£o.",
          "Scripts de ETL, reconcilia√ß√£o de rubricas e saldos, trilhas de auditoria.",
          "Manuais e treinamento para usu√°rios-chave e opera√ß√£o."
        ],
        indicadores: [
          "% de empresas migradas dentro do prazo (meta: ‚â•90%).",
          "Diverg√™ncia m√°xima entre folhas antiga vs. ERGON no m√™s do go-live (meta: ‚â§0,10% do total bruto).",
          "Incidentes cr√≠ticos p√≥s-go-live por empresa (meta: 0 no D+5; ‚â§2 no D+30)."
        ],
        prazos: "Ondas trimestrais; cada empresa com gate de homologa√ß√£o e aceite formal.",
        riscos: "Indisponibilidade de ambientes (mitigar com plano de conting√™ncia e janelas aprovadas), inconsist√™ncias cadastrais (clean-up pr√©vio e testes automatizados)."
      },
      {
        id: 2,
        titulo: "Revis√£o do Ecossistema de Consignados (servidor e governan√ßa de receita)",
        status: "em_andamento",
        progresso: 0,
        cor: "var(--purple)",
        objetivo: "Reestruturar conv√™nios de consignado para reduzir o CET ao servidor, ampliar concorr√™ncia e transpar√™ncia, e alinhar a receita institucional a custos de fiscaliza√ß√£o/opera√ß√£o ‚Äî evitando repasses que encare√ßam o cr√©dito.",
        entregas: [
          "Novo regulamento/conv√™nio padr√£o com: portabilidade √°gil, leil√£o/tabela din√¢mica de taxas, limites e transpar√™ncia de CET; governan√ßa de margem.",
          "Portal de transpar√™ncia do consignado (taxas, CET, prazos, volumes, reclama√ß√µes).",
          "Trilhas de auditoria e SLAs (portabilidade, liquida√ß√£o, estornos).",
          "Programa de educa√ß√£o financeira e alerta de superendividamento."
        ],
        indicadores: [
          "Redu√ß√£o do CET m√©dio ponderado (meta: ‚àí15% em 12 meses).",
          "Tempo m√©dio de portabilidade (meta: ‚â§5 dias √∫teis).",
          "% de opera√ß√µes com institui√ß√µes habilitadas via regras de concorr√™ncia (meta: ‚â•80%).",
          "Receita institucional limitada e vinculada (meta: 100% lastreada a custos operacionais, sem efeito l√≠quido de aumento ao servidor)."
        ],
        prazos: "Novo modelo publicado em 120 dias; ades√£o de institui√ß√µes em 180 dias.",
        riscos: "Repasse de custos ao servidor (mitigar com tetos de CET e competi√ß√£o), litigiosidade (consultoria jur√≠dica pr√©via e fase de transi√ß√£o)."
      },
      {
        id: 3,
        titulo: "Gateway Seguro de Remessas e Retornos de Pagamento",
        status: "em_andamento",
        progresso: 0,
        cor: "var(--cyan)",
        objetivo: "Implantar um hub automatizado e audit√°vel de interc√¢mbio de arquivos financeiros (remessas/retornos), integrado ao ERGON e bancos parceiros.",
        entregas: [
          "Padr√µes de arquivos e valida√ß√µes (ex.: layouts predefinidos/retornos), versionamento e logs.",
          "Integra√ß√£o com armazenamento corporativo (drive seguro) e rotinas de concilia√ß√£o autom√°tica.",
          "Painel de monitoramento (fila, status, erros, SLA) e alarm√≠stica."
        ],
        indicadores: [
          "Automa√ß√£o das remessas/retornos (meta: ‚â•95%).",
          "Falhas por milh√£o de transa√ß√µes (meta: ‚â§3 PPM).",
          "Tempo de ciclo remessa‚Üíconfirma√ß√£o (meta: ‚â§60 min em dias √∫teis)."
        ],
        prazos: "MVP em 90 dias; full em 150 dias.",
        riscos: "Indisponibilidade de terceiros (fila resiliente e reprocessamento), erro humano (valida√ß√µes pr√©-envio e perfis de acesso)."
      },
      {
        id: 4,
        titulo: "Plataforma de BI de Folha e Pessoas",
        status: "em_andamento",
        progresso: 0,
        cor: "var(--green)",
        objetivo: "Disponibilizar pain√©is executivos e anal√≠ticos (folha, headcount, cargos, benef√≠cios, encargos), com granularidade por regime jur√≠dico, √≥rg√£o e unidade, para gest√£o e controle.",
        entregas: [
          "Modelo de dados (DW) e dicion√°rio de rubricas/medidas; camadas de qualidade e hist√≥rico.",
          "Pain√©is: execu√ß√£o de folha, varia√ß√µes m√™s a m√™s, provis√µes, indicadores de conformidade, trilhas de auditoria.",
          "Governan√ßa de dados (pap√©is, acessos, LGPD) e capacita√ß√£o de usu√°rios."
        ],
        indicadores: [
          "Cobertura de rubricas/√≥rg√£os (meta: 100%).",
          "Lat√™ncia de atualiza√ß√£o (meta: D+1).",
          "Acur√°cia das medidas-chave (meta: ‚â•99,9%).",
          "Ado√ß√£o (usu√°rios ativos/m√™s) e NPS interno (meta: ‚â•70)."
        ],
        prazos: "Release inicial em 120 dias; evolu√ß√£o trimestral por sprints.",
        riscos: "Qualidade de origem (regras de valida√ß√£o), uso indevido (RBAC e logs)."
      },
      {
        id: 5,
        titulo: "Reestrutura√ß√£o dos Cargos da Administra√ß√£o (proposta legislativa sem aumento de despesa)",
        status: "em_andamento",
        progresso: 0,
        cor: "var(--warn)",
        objetivo: "Redesenhar carreiras e atribui√ß√µes da atividade-meio, com regras claras de aloca√ß√£o e mobilidade, mantendo neutralidade or√ßament√°ria.",
        entregas: [
          "Mapa de macrofun√ß√µes e fam√≠lias ocupacionais; matriz de compet√™ncias e trilhas de desenvolvimento.",
          "Diagn√≥stico de aloca√ß√£o e gargalos; diretrizes de movimenta√ß√£o (lota√ß√£o, cess√£o, crit√©rios objetivos).",
          "Estudo de impacto (custos, riscos, ganhos de efici√™ncia) e minuta de projeto de lei com justificativa t√©cnica."
        ],
        indicadores: [
          "Entrega da proposta legislativa ao Executivo (meta: at√© T+150 dias).",
          "Neutralidade fiscal demonstrada (Œî despesa de pessoal = 0).",
          "Redu√ß√£o de assimetrias de atribui√ß√µes (meta: ‚â•80% dos cargos com descri√ß√£o atualizada e n√£o sobreposta)."
        ],
        prazos: "Consulta interna em 60 dias; minuta consolidada em 120; submiss√£o em 150.",
        riscos: "Depend√™ncia de aprova√ß√£o legislativa (engajamento pr√©vio e notas t√©cnicas), resist√™ncia organizacional (participa√ß√£o das √°reas e comunica√ß√£o)."
      },
      {
        id: 6,
        titulo: "Efici√™ncia tarif√°ria no Mercado Livre de Energia (ACL)",
        status: "em_andamento",
        progresso: 0,
        cor: "var(--pink)",
        objetivo: "Reduzir o custo unit√°rio m√©dio de energia el√©trica das unidades administrativas migradas ao ACL em 2025, buscando ‚â•20% de redu√ß√£o versus o cen√°rio cativo.",
        entregas: [
          "Diagn√≥stico de cargas e perfil de consumo; estrat√©gia de compras (RFP/leil√£o/portf√≥lio) e registro na CCEE.",
          "Contratos com comercializadoras (fixo/√≠ndice/PLD com hedge), plano de medi√ß√£o e shadow billing mensal.",
          "Go-live por ondas trimestrais; relat√≥rio bimestral de economia obtida."
        ],
        indicadores: [
          "Indicador principal: Redu√ß√£o percentual do Custo Unit√°rio Total (R$/MWh) ponderado pelo consumo do per√≠odo.",
          "C√°lculo: CUT = (TE contratada no ACL + TUSD + encargos setoriais/CCEE) √∑ MWh faturado.",
          "Baseline de compara√ß√£o (shadow bill): valor que seria pago no mercado cativo para o mesmo consumo e per√≠odo."
        ],
        metas: [
          "Alvo: redu√ß√£o m√©dia ‚â•20% no conjunto migrado at√© 31/12/2025.",
          "Gatilho t√©cnico: ajustar alvo para m√≠nimo assegurado (ex.: ‚â•12‚Äì15%) se estudo pr√©vio indicar potencial inferior; manter 20% como stretch goal."
        ],
        prazos: "Entregas conforme ondas trimestrais; relat√≥rios bimestrais de economia.",
        riscos: "Volatilidade de pre√ßos (portfolio ladder/hedge), varia√ß√£o de TUSD (sensibilidade), atraso de migra√ß√£o (conting√™ncia e prioriza√ß√£o de carga)."
      },
      {
        id: 7,
        titulo: "Desenvolvimento de Pessoas ‚Äì 4.000 capacita√ß√µes certificadas em 2025",
        status: "em_andamento",
        progresso: 0,
        cor: "var(--good)",
        objetivo: "Ampliar compet√™ncias t√©cnicas e gerenciais por meio dos Programas de Desenvolvimento, garantindo qualidade, ader√™ncia e mensura√ß√£o de resultados.",
        entregas: [
          "Plano Anual de Capacita√ß√£o com trilhas, cat√°logo e calend√°rio; conte√∫dos EAD ass√≠ncronos + oficinas s√≠ncronas; avalia√ß√£o de rea√ß√£o e de aprendizado (pr√©/p√≥s).",
          "Dashboard mensal com matr√≠culas, conclus√µes, horas treinadas e distribui√ß√£o por secretaria; certifica√ß√£o autom√°tica."
        ],
        indicadores: [
          "4.000 conclus√µes certificadas (participa√ß√µes conclu√≠das), sendo ‚â•60% alinhadas a trilhas priorit√°rias.",
          "Taxa de conclus√£o ‚â•80% das matr√≠culas; satisfa√ß√£o ‚â•85% (CSAT/NPS interno).",
          "Cobertura: alcan√ßar ‚â•25% dos √≥rg√£os/unidades com ao menos um curso ofertado e conclu√≠do."
        ],
        prazos: "Execu√ß√£o anual com pain√©is mensais; marcos por trimestre.",
        riscos: "Baixa ades√£o (campanhas e turmas in-company), restri√ß√£o or√ßament√°ria (priorizar EAD e parcerias), indisponibilidade operacional (turmas modulares e grava√ß√£o para reprise)."
      }
    ];

    const statusMap = {
      em_andamento: { label: "Em andamento", color: "var(--accent)" },
      risco: { label: "Em risco", color: "var(--warn)" },
      concluido: { label: "Conclu√≠do", color: "var(--good)" }
    };

    const kpiEl = document.getElementById('kpis');
    const gridEl = document.getElementById('grid');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalDot = document.getElementById('modalDot');

    function renderKpis(list) {
      kpiEl.innerHTML = "";
      const totals = {
        total: list.length,
        risco: list.filter(m=>m.status==='risco').length,
        concl: list.filter(m=>m.status==='concluido').length,
        andamento: list.filter(m=>m.status==='em_andamento').length
      };
      const items = [
        { icon: "üéØ", name: "Metas", sub: `${totals.total} iniciativas`, pill: "Portf√≥lio 2025" },
        { icon: "üö¶", name: "Em risco", sub: `${totals.risco}`, pill: "Mitiga√ß√£o ativa" },
        { icon: "‚úÖ", name: "Conclu√≠das", sub: `${totals.concl}`, pill: "Entregas realizadas" },
        { icon: "üîÑ", name: "Em andamento", sub: `${totals.andamento}`, pill: "Execu√ß√£o" }
      ];
      items.forEach((i,idx)=>{
        const c = document.createElement('div');
        c.className = 'kpi';
        c.innerHTML = `
          <div class="badge">${i.icon}</div>
          <div>
            <h3>${i.pill}</h3>
            <div class="name">${i.name}</div>
          </div>
          <div class="donut" style="--p:${Math.min(100, (idx===3? (totals.andamento/totals.total*100) : idx===1? (totals.risco?50:10) : idx===2? (totals.concl?100:0) : 100)).toFixed(0)}; --c:${idx===1?'var(--warn)':idx===2?'var(--good)':'var(--accent)'}" data-label="${i.sub}"></div>
        `;
        kpiEl.appendChild(c);
      });
    }

    function section(title, items) {
      return `
        <div class="sec">
          <h4>${title}</h4>
          <ul>${items.map(x=>`<li>${x}</li>`).join('')}</ul>
        </div>
      `;
    }

    function openMeta(meta) {
      modalTitle.textContent = meta.titulo;
      modalDot.style.background = statusMap[meta.status]?.color || 'var(--accent)';
      modalBody.innerHTML = `
        <div class="sections">
          <div class="sec" style="grid-column: span 12;">
            <h4>Objetivo</h4>
            <p>${meta.objetivo}</p>
          </div>
          ${section('Entregas principais', meta.entregas)}
          ${section('Indicadores e metas', meta.indicadores.concat(meta.metas || []))}
          <div class="sec">
            <h4>Prazo e marcos</h4>
            <p>${meta.prazos}</p>
          </div>
          <div class="sec">
            <h4>Riscos e mitiga√ß√£o</h4>
            <p>${meta.riscos}</p>
          </div>
        </div>
        <div class="foot">
          <span class="pill"><span class="status-dot" style="background:${statusMap[meta.status]?.color || 'var(--accent)'}"></span>${statusMap[meta.status]?.label || 'Status'}</span>
          <div style="display:flex;gap:8px;">
            <button class="btn ghost" onclick="navigator.clipboard.writeText(JSON.stringify(meta,null,2))">Copiar JSON</button>
            <button class="btn" onclick="modal.close()">Ok</button>
          </div>
        </div>
      `;
      modal.showModal();
    }

    function card(meta) {
      const st = statusMap[meta.status] || {label:'Status', color:'var(--accent)'};
      const el = document.createElement('article');
      el.className = 'card';
      el.innerHTML = `
        <div class="head">
          <div style="display:flex;align-items:center;gap:10px;">
            <div class="badge" style="background: linear-gradient(135deg, ${meta.cor}33, rgba(255,255,255,.06)); border:1px solid rgba(159,179,200,.16);">
              ${meta.id}
            </div>
            <div>
              <h2>${meta.titulo}</h2>
              <div class="meta-tags">
                <span class="pill" style="border-color:${meta.cor}; color:${meta.cor}">ID ${meta.id}</span>
                <span class="pill" style="border-color:${st.color};"><span class="status-dot" style="background:${st.color}"></span>${st.label}</span>
              </div>
            </div>
          </div>
          <div class="donut" style="--p:${meta.progresso||0}; --c:${meta.cor}" data-label="${(meta.progresso||0)}%"></div>
        </div>
        <div class="sections">
          <div class="sec" style="grid-column: span 12;">
            <h4>Objetivo</h4>
            <p>${meta.objetivo}</p>
          </div>
          <div class="sec">
            <h4>Entregas principais</h4>
            <ul>${meta.entregas.map(x=>`<li>${x}</li>`).join('')}</ul>
          </div>
          <div class="sec">
            <h4>Indicadores e metas</h4>
            <ul>${meta.indicadores.concat(meta.metas || []).map(x=>`<li>${x}</li>`).join('')}</ul>
          </div>
          <div class="sec">
            <h4>Prazo e marcos</h4>
            <p>${meta.prazos}</p>
          </div>
          <div class="sec">
            <h4>Riscos e mitiga√ß√£o</h4>
            <p>${meta.riscos}</p>
          </div>
        </div>
        <div class="foot">
          <button class="btn" onclick="openMeta(window.metas[${meta.id-1}])">Ver detalhes</button>
          <div class="meta-tags">
            <span class="tag">Atualizado: ${new Date().toLocaleDateString('pt-BR')}</span>
          </div>
        </div>
      `;
      return el;
    }

    function renderGrid(list) {
      gridEl.innerHTML = "";
      list.forEach(m => gridEl.appendChild(card(m)));
    }

    function filterAndRender() {
      const q = document.getElementById('q').value.toLowerCase();
      const sf = document.getElementById('statusFilter').value;
      const filtered = metas.filter(m => {
        const hit = [m.titulo, m.objetivo, m.prazos, m.riscos].join(' ').toLowerCase()
          + ' ' + m.entregas.join(' ').toLowerCase()
          + ' ' + m.indicadores.join(' ').toLowerCase()
          + ' ' + (m.metas||[]).join(' ').toLowerCase();
        const statusOk = (sf === 'all') || (m.status === sf);
        return statusOk && hit.includes(q);
      });
      renderKpis(filtered);
      renderGrid(filtered);
    }

    // Print content
    function buildPrint() {
      const bullets = [
        "Unificar RH/folha das empresas no ERGON, com integridade e redu√ß√£o de custos.",
        "Revisar os consignados para reduzir o CET, ampliar concorr√™ncia e fortalecer a governan√ßa de receita.",
        "Implantar gateway seguro e audit√°vel para remessas e retornos de pagamento, integrado ao ERGON e bancos.",
        "Disponibilizar BI de Folha e Pessoas com dados confi√°veis, D+1 e governan√ßa LGPD.",
        "Entregar proposta legislativa de reestrutura√ß√£o de cargos com neutralidade or√ßament√°ria.",
        "Alcan√ßar efici√™ncia tarif√°ria no ACL com redu√ß√£o m√©dia ‚â•20% vs. cativo at√© 31/12/2025.",
        "Certificar 4.000 capacita√ß√µes com ‚â•80% de conclus√£o e ‚â•85% de satisfa√ß√£o."
      ];
      document.getElementById('execBullets').innerHTML = bullets.map(b=>`<li>${b}</li>`).join('');

      const details = document.getElementById('printDetails');
      details.innerHTML = metas.map(m => `
        <div class="pb"></div>
        <h2>${m.id}) ${m.titulo}</h2>
        <p><strong>Objetivo:</strong> ${m.objetivo}</p>
        <p><strong>Entregas principais:</strong></p>
        <ul>${m.entregas.map(x=>`<li>${x}</li>`).join('')}</ul>
        <p><strong>Indicadores e metas:</strong></p>
        <ul>${(m.indicadores || []).concat(m.metas || []).map(x=>`<li>${x}</li>`).join('')}</ul>
        <p><strong>Prazo/marcos:</strong> ${m.prazos}</p>
        <p><strong>Riscos & mitiga√ß√£o:</strong> ${m.riscos}</p>
      `).join('');
    }

    document.getElementById('q').addEventListener('input', filterAndRender);
    document.getElementById('statusFilter').addEventListener('change', filterAndRender);
    document.getElementById('expandAll').addEventListener('click', () => {
      document.querySelectorAll('.card .sections').forEach(sec => sec.style.maxHeight = 'unset');
    });
    document.getElementById('printBtn').addEventListener('click', () => {
      buildPrint();
      window.print();
    });

    // Initial render
    renderKpis(metas);
    renderGrid(metas);

    // Expor global para modais
    window.metas = metas;
  </script>
</body>
</html>